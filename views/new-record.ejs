<html lang="en">
  <%- include("./partials/head.ejs") %>
  <link rel="stylesheet" href="/new-record-form.css" />

  <body>
    <%- include("./partials/nav.ejs") %>

    <form class="new-record" action="/new-record" method="post">
      <h2>Observations Form</h2>

      <div class="new-record-grid-container">
        <div class="grid-item">
          <% if (id) { %>
          <label for="patientId">Patient ID:</label>
          <input
            type="text"
            id="patientId"
            name="patientId"
            value="<%= id %>"
            readonly
          />

          <% } else { %>

          <label for="patientId">Patient ID:</label>
          <select id="patientId" name="patientId" required>
            <option value="" disabled selected>Select Patient ID</option>

            <% patients.forEach(patient => { %>
            <option value="<%= patient %>"><%= patient%></option>
            <% }); %>
          </select>

          <% } %>
        </div>

        <div class="grid-item">
          <label for="oxygen">Receiving Oxygen:</label>
          <div>
            <input
              type="radio"
              id="oxygen_yes"
              name="observation[oxygen]"
              value="true"
            />
            <label class="radio-label" for="oxygen_yes">Yes</label>
          </div>
          <div>
            <input
              type="radio"
              id="oxygen_no"
              name="observation[oxygen]"
              value="false"
            />
            <label class="radio-label" for="oxygen_no">No</label>
          </div>
        </div>

        <div class="grid-item">
          <label>Consciousness:</label>
          <div>
            <input
              type="radio"
              id="consciousness_alert"
              name="observation[cvpu]"
              value="false"
            />
            <label class="radio-label" for="consciousness_alert">Alert</label>
          </div>
          <div>
            <input
              type="radio"
              id="consciousness_cvpu"
              name="observation[cvpu]"
              value="true"
            />
            <label class="radio-label" for="consciousness_cvpu">CVPU</label>
          </div>
        </div>

        <div class="grid-item">
          <label for="respirationRate">Respiration Rate:</label>
          <input
            type="number"
            id="respirationRate"
            name="observation[respirationRate]"
          />
        </div>

        <div class="grid-item">
          <label for="spO2">Oxygen Saturation %:</label>
          <input type="number" id="spO2" name="observation[spO2]" /><br />
        </div>

        <div class="grid-item">
          <label for="temperature">Temperature:</label>
          <input
            type="number"
            id="temperature"
            name="observation[temperature]"
            step="0.1"
          />
        </div>

        <div class="grid-item">
          <label for="cbgValue">Capillary Blood Glucose:</label>
          <input
            type="number"
            id="cbgValue"
            name="observation[cbg][value]"
            step="0.1"
          />
        </div>

        <div class="grid-item">
          <label for="cbgFasting">Patient fasting:</label>
          <div>
            <input
              type="radio"
              id="cbgFasting_yes"
              name="observation[cbg][fasting]"
              value="true"
            />
            <label class="radio-label" for="cbgFasting_yes">Yes</label>
          </div>
          <div>
            <input
              type="radio"
              id="cbgFasting_no"
              name="observation[cbg][fasting]"
              value="false"
            />
            <label class="radio-label" for="cbgFasting_no">No</label>
          </div>
        </div>

        <div class="grid-item">
          <label for="time">Time:</label>
          <input
            type="datetime-local"
            id="time"
            name="observation[time]"
            value="<%= currentDateTime %>"
          />
        </div>

        <div class="grid-item">
          <label for="comments">Comments:</label>
        </div>
        <div class="grid-item">
          <textarea id="comments" name="observation[comments]"></textarea>
        </div>

        <div class="grid-item">
          <input type="submit" value="Submit" />
        </div>
      </div>
      <br />
    </form>
  </body>
</html>
